# 主席總結流程與 ODS 整合說明

在整合 Open Data Scientist (ODS) 之後，主席 (Chairman) 的總結流程將具備更強的數據佐證能力。以下說明主席在總結時會執行的動作，以及 ODS 如何介入。

## 1. 總結流程概述

主席的總結不再僅僅是文字的彙整，而是會包含「數據驗證」與「視覺化呈現」兩個新維度。

### 階段一：收集與聚合 (Data Aggregation)
- **原始輸入**：各辯手 (正方/反方) 的論點、使用的工具結果 (News, TEJ Data)。
- **ODS 介入**：
    - 若辯論過程中，辯手調用了 `ask_data_scientist` 工具，ODS 生成的分析報告（含圖表路徑）會被納入證據庫。
    - 主席會掃描這些報告，提取關鍵數據點 (例如：CAGR, 相關係數, 預測值)。

### 階段二：事實查核 (Fact Checking)
- **自動驗證**：主席會對比辯手口述的數據與 ODS 跑出來的結果。
    - *情境*：辯手聲稱「營收年增 50%」，但 ODS 算出來只有 30%。
    - *動作*：主席在總結中會標註：「儘管正方聲稱高成長，但經由數據科學家驗證，實際成長率為 30%。」

### 階段三：生成總結報告 (Summary Generation)
主席的 Prompt (`chairman.summarize_debate`) 已更新，會要求結構化輸出，並整合 ODS 的成果：

1.  **戰略對齊**：回顧是否偏題。
2.  **證據效力**：引用 ODS 的分析圖表 (Markdown Image)。
    - 例如：`![Revenue Trend](./charts/plot_12345.png)`
3.  **量化指標**：直接引用 Python 計算出的精確數值，而非模糊形容。
4.  **行動建議**：基於數據預測提出具體操作建議。

---

## 2. 具體範例

假設辯題是「台積電 2025 年營收預測」。

1.  **辯手發言**：正方認為 AI 需求將帶動營收翻倍。
2.  **ODS 工作**：
    - 主席或辯手調用 ODS。
    - ODS 執行 Python 代碼，拉取 TEJ 數據，計算過去 5 年的 CAGR，並用 Scikit-Learn 做線性回歸預測 2025 營收。
    - ODS 產出：文字報告「預測 2025 營收約為 3.2 兆，成長率 25%」 + 圖表 `tsmc_rev_pred.png`。
3.  **主席總結**：
    > 「關於正方提出的營收翻倍觀點，經數據模型驗證（見下圖），線性回歸顯示 2025 年預期營收落在 3.2 兆元（年增 25%），雖趨勢向上但未達翻倍水準。投資人應保守看待爆發性成長的預期。」
    >
    > ![Revenue Prediction](./charts/tsmc_rev_pred.png)

## 3. 技術實現細節

- **圖表嵌入**：ODS 生成的圖片會儲存在 `charts/` 目錄，主席在 Markdown 中透過相對路徑引用。
- **數據一致性**：所有數據皆源自 Docker 沙箱內執行的 Python 代碼，確保了計算邏輯的可重現性 (Reproducibility)。

## 4. 下一步優化

- **主動觸發**：目前是被動調用。未來可讓主席在發現數據模糊時，*主動* 指派任務給 ODS (例如：「ODS，請幫我算一下這兩者的相關性」)。
- **圖表互動**：將靜態圖片升級為 Plotly 互動圖表。
